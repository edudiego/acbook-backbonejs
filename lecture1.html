<!DOCTYPE HTML>
<!--
	Read Only by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
<head>
	<title>Backbone.js - Lecture 1</title>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<meta name="description" content="" />
	<meta name="keywords" content="" />
	<!--[if lte IE 8]><script src="css/ie/html5shiv.js"></script><![endif]-->
	<script src="js/jquery.min.js"></script>
	<script src="js/jquery.scrollzer.min.js"></script>
	<script src="js/jquery.scrolly.min.js"></script>
	<script src="js/skel.min.js"></script>
	<script src="js/skel-layers.min.js"></script>
	<script src="js/init.js"></script>

	<noscript>
		<link rel="stylesheet" href="css/skel.css" />
		<link rel="stylesheet" href="css/style.css" />
		<link rel="stylesheet" href="css/style-xlarge.css" />
	</noscript>

	<style>
	.ac-caption {
		margin: 5px 0px 10px 0px;
		font-size: 13px;
		text-align: center;
	}

	#header > nav ul li a {
		padding: 0px;
		font-size: 0.8em;
	}

	#one:before {
		background-image: none;
		height: 0em;
	}

	header.major h2 {
		line-height: 1em;
	}
	</style>

	<!--[if lte IE 8]><link rel="stylesheet" href="css/ie/v8.css" /><![endif]-->
</head>
<body>
	<div id="wrapper">

		<!-- Header -->
		<section id="header" class="skel-layers-fixed">
			<header>

				<h1 id="logo"><a href="#">Backbone - Lecture 1</a></h1>

			</header>
			<nav id="nav">
				<ul>
					<li><a href="#one" class="active">Introduction</a></li>
					<li><a href="#two">Installing this course</a></li>
					<li><a href="#three">Backbone Overview</a></li>
					<li><a href="#four">Views</a></li>
					<li><a href="#five">Models, part 1</a></li>
				</ul>
				<img src="http://www.avenuecode.com/wp-content/themes/ac-site/images/white-logo.png" alt="">
			</nav>
			<footer>
			</footer>
		</section>

		<!-- Main -->
		<div id="main">

			<div class="container">
				<img class="logo-big" src="./images/backbone.png">
			</div>

			<!-- One -->
			<section id="one">
				<div class="container">

					
					<header class="major">
						<h2>Introduction</h2>
					</header>

					<p align="justify"><b>Backbone.js</b> is a <a href="https://en.wikipedia.org/wiki/JavaScript" title="JavaScript">JavaScript</a> library with a <b>RESTful</b> <a href="https://en.wikipedia.org/wiki/JSON" title="JSON">JSON</a> interface and is based on the <b>model–view–presenter</b> (MVP) application design paradigm. Backbone is known for being lightweight, as it only depends three other JavaScripts libraries: jQuery, JSON2, and <a href="https://en.wikipedia.org/wiki/Underscore.js" title="Underscore.js">Underscore.js</a>. It is designed for developing <a href="https://en.wikipedia.org/wiki/Single-page_application" title="Single-page application">single-page web applications</a>, and for keeping various parts of web applications (e.g. multiple clients and the server) synchronized.</p>

					<p align="justify">
						It is used on world famous web-applications such as Airbnb, Groupon, Hulu, Digg, Trello, Pinterest, Flixter and Foursquare.
					</p>

					<header>
						<h4>From <a href="http://backbonejs.org/">backbonejs.org</a>:</h4>
					</header>

					<p align="justify">
						Backbone.js gives structure to web applications
						by providing <b>models</b> with key-value binding and custom events,
						<b>collections</b> with a rich API of enumerable functions,
						<b>views</b> with declarative event handling, and connects it all to your
						existing API over a RESTful JSON interface.
					</p>

			</div>
		</section>		

		<section id="two">
				<div class="container">

					<header class="major">
						<h2>Installing this course</h2>
					</header>

					<p align="justify">
						Backbone.js can be just copied to your assets folder and run offline, but in order interact with this course's backend API, which is based on <b>Node.js</b> and <b>MongoDB</b>, we will install a GitHub repository and run its <b>Node.js</b> server.
					</p>

					<p align="justify">
						In order to do so, just run:
					</p>

<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #a6e22e">git</span> <span style="color: #a6e22e">clone</span> <span style="color: #a6e22e">git</span><span style="color: #960050; background-color: #1e0010">@</span><span style="color: #a6e22e">github</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">com</span><span style="color: #f92672">:</span><span style="color: #a6e22e">edudiego</span><span style="color: #f92672">/</span><span style="color: #a6e22e">AC</span><span style="color: #f92672">-</span><span style="color: #a6e22e">socialApi</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">git</span>
</pre></div>
<div class="ac-caption">This will clone the git repository into the current folder.</div>

					<p align="justify">
						Then do a <b>git checkout</b> to the <b>Exercises</b> branch:
					</p>

<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #a6e22e">git</span> <span style="color: #a6e22e">checkout</span> <span style="color: #a6e22e">Exercises</span>
</pre></div>
<div class="ac-caption">This will get the Exercises last updated files.</div>

					<p align="justify">
						After doing that, run the node package manager to install this project dependencies:
					</p>

<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #a6e22e">npm</span> <span style="color: #a6e22e">install</span>
</pre></div>
<div class="ac-caption">This will install all the project local dependencies.</div>
					
					<header>
						<h4>Installing Bower</h4>
					</header>

					<p align="justify">
						<b>Bower</b> is a package manager system similar to npm, the Node package manager, but  focused on front-end libraries. We are going to use it to install Backbone.js and its dependencies:
					</p>

<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #a6e22e">npm</span> <span style="color: #a6e22e">install</span> <span style="color: #a6e22e">bower</span> <span style="color: #f92672">-</span><span style="color: #a6e22e">g</span>
</pre></div>

<div class="ac-caption">Unlike other project dependencies Bower should be installed globally (-g).</div>

					<p align="justify">
						 Bower could be listed together with the project dependencies and had been installed on the npm install you run before, but its installation was left separated for didatic reasons.
					</p>

					<header>
						<h4>Installing Backbone.js (and its dependencies)</h4>
					</header>

					<p align="justify">
						When you use Bower to install any front-end library, it will download and store all the library's files and sources on a folder called <b>bower_components</b>. Then the best way to move those files to their desired location would be creating a <b>grunt task</b> to copy only the distribution files to those locations when you run <b>grunt &lt;name of that task&gt;</b>. 
					</p>

					<p align="justify">
						As <b>grunt tasks</b> configuration is out of this course's scope, we are going to work around that by using a bower configuration file, called <b>.bowerrc</b> (note the dot at the beginning of the name).
						Just copy the contents below to your <b>.bowerrc</b> file:
					</p>

<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #f8f8f2">{</span>
  <span style="color: #e6db74">&quot;directory&quot;</span><span style="color: #f92672">:</span> <span style="color: #e6db74">&quot;expressServer/public/lib/js&quot;</span>
<span style="color: #f8f8f2">}</span>
</pre></div>
<div class="ac-caption">Now when you run bower it will save the libraries' files on that directory.</div>

					<p align="justify">
						To install Backbone.js and its dependencies, run:
					</p>

<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #a6e22e">bower</span> <span style="color: #a6e22e">install</span> <span style="color: #a6e22e">backbone</span> <span style="color: #f92672">--</span><span style="color: #a6e22e">save</span>
</pre></div>
<div class="ac-caption">Backbone.js and its dependencies (jQuery, JSON2 and underscore) should be installed.</div>

					<p align="justify">
						We are also going to need the <b>md5</b> javascript library, so let's take advantage of bower and install it too:
					</p>

<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #a6e22e">bower</span> <span style="color: #a6e22e">install</span> <span style="color: #a6e22e">md5</span> <span style="color: #f92672">--</span><span style="color: #a6e22e">save</span>
</pre></div>
<div class="ac-caption">The md5 library will be used with Gravatar to render our social network profile pics.</div>

					<p align="justify">
						The <b>--save</b> option is used to store the name of the installed package on your <b>bower.json</b> file, so you can install all your packages in another project instance just running <b>bower install</b>.
					</p>

					<p align="justify">
						After all this is set up, you should be able to start the server by running the command below:
					</p>

<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #a6e22e">grunt</span> <span style="color: #a6e22e">serverExpress</span>
</pre></div>
<div class="ac-caption">Start the Node.js server.</div>

			</div>
		</section>		

		<section id="three">
				<div class="container">

					<header class="major">
						<h2>Backbone Overview</h2>
					</header>					
					
					<img src="./images/backbone_mvc.png">

					<header>
						<h4>Backbone.Router</h4>
					</header>

					<p align="justify">
						Web applications often provide linkable, bookmarkable, shareable URLs for
						important locations in the app. Until recently, hash fragments
						(<tt>#page</tt>) were used to provide these permalinks, but with the
						arrival of the History API, it's now possible to use standard URLs (<tt>/page</tt>).
						<b>Backbone.Router</b> provides methods for routing client-side pages, and
						connecting them to actions and events. For browsers which don't yet support
						the History API, the Router handles graceful fallback and transparent
						translation to the fragment version of the URL.
					</p>

<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">var</span> <span style="color: #a6e22e">Workspace</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">Backbone</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">Router</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">extend</span><span style="color: #f8f8f2">({</span>
  <span style="color: #a6e22e">routes</span><span style="color: #f92672">:</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #e6db74">&quot;help&quot;</span><span style="color: #f92672">:</span>                 <span style="color: #e6db74">&quot;help&quot;</span><span style="color: #f8f8f2">,</span>    <span style="color: #75715e">// #help</span>
    <span style="color: #e6db74">&quot;search/:query&quot;</span><span style="color: #f92672">:</span>        <span style="color: #e6db74">&quot;search&quot;</span><span style="color: #f8f8f2">,</span>  <span style="color: #75715e">// #search/kiwis</span>
    <span style="color: #e6db74">&quot;search/:query/p:page&quot;</span><span style="color: #f92672">:</span> <span style="color: #e6db74">&quot;search&quot;</span>   <span style="color: #75715e">// #search/kiwis/p7</span>
  <span style="color: #f8f8f2">},</span>
  <span style="color: #a6e22e">help</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">...</span>
  <span style="color: #f8f8f2">},</span>
  <span style="color: #a6e22e">search</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">query</span><span style="color: #f8f8f2">,</span> <span style="color: #a6e22e">page</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">...</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">});</span>
</pre></div>

			
<div class="ac-caption">An example of a Router with 3 pre-defined routes.</div>
					<header>
						<h4>Backbone.View</h4>
					</header>

					<p align="justify">
						Backbone views are almost more convention than they are code — they
						don't determine anything about your HTML or CSS for you, and can be used
						with any JavaScript templating library.
						The general idea is to organize your interface into logical views,
						backed by models, each of which can be updated independently when the
						model changes, without having to redraw the page. Instead of digging into
						a JSON object, looking up an element in the DOM, and updating the HTML by hand,
						you can bind your view's <tt>render</tt> function to the model's <tt>"change"</tt>
						event — and now everywhere that
						model data is displayed in the UI, it is always immediately up to date.
					</p>

<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">var</span> <span style="color: #a6e22e">DocumentRow</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">Backbone</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">View</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">extend</span><span style="color: #f8f8f2">({</span>
  <span style="color: #a6e22e">events</span><span style="color: #f92672">:</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">...</span>
  <span style="color: #f8f8f2">},</span>
  <span style="color: #a6e22e">initialize</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #66d9ef">this</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">listenTo</span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">this</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">model</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;change&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #66d9ef">this</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">render</span><span style="color: #f8f8f2">);</span>
  <span style="color: #f8f8f2">},</span>
  <span style="color: #a6e22e">render</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">...</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">});</span>
</pre></div>

					
<div class="ac-caption">An example of a View that automatically updates the DOM upon model data change.</div>
					<header>
						<h4>Backbone.Model</h4>
					</header>

					<p align="justify">
      <b>Models</b> are the heart of any JavaScript application, containing
      the interactive data as well as a large part of the logic surrounding it:
      conversions, validations, computed properties, and access control. You
      extend <b>Backbone.Model</b> with your domain-specific methods, and
      <b>Model</b> provides a basic set of functionality for managing changes.
    </p>

<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">var</span> <span style="color: #a6e22e">UserModel</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">Backbone</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">Model</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">extend</span><span style="color: #f8f8f2">({</span>
    <span style="color: #a6e22e">url</span><span style="color: #f92672">:</span> <span style="color: #e6db74">&#39;/users/me&#39;</span><span style="color: #f8f8f2">,</span>
    <span style="color: #a6e22e">idAttribute</span><span style="color: #f92672">:</span> <span style="color: #e6db74">&#39;_id&#39;</span>
<span style="color: #f8f8f2">});</span>

<span style="color: #66d9ef">var</span> <span style="color: #a6e22e">user</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">new</span> <span style="color: #a6e22e">UserModel</span><span style="color: #f8f8f2">();</span>
</pre></div>
<div class="ac-caption">A Backbone.js Model definition and instanciation.</div>

			</div>
		</section>		

		<section id="four">
			<div class="container">

				<header class="major">
					<h2>Views</h2>
				</header>	
				<p align="justify">
				Backbone views are used to reflect what your applications' data models look like. They are also used to listen to events and react accordingly.
				</p>

<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">var</span> <span style="color: #a6e22e">MyProfileView</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">Backbone</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">View</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">extend</span><span style="color: #f8f8f2">({</span>
  <span style="color: #a6e22e">initialize</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">(){</span>
    <span style="color: #a6e22e">alert</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;My profile view has started.&quot;</span><span style="color: #f8f8f2">);</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">});</span>

<span style="color: #75715e">// The initialize function is always called when instantiating a Backbone View.</span>
<span style="color: #75715e">// Consider it the constructor of the class.</span>
<span style="color: #66d9ef">var</span> <span style="color: #a6e22e">myProfileView</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">new</span> <span style="color: #a6e22e">MyProfileView</span><span style="color: #f8f8f2">();</span>
</pre></div>
<div class="ac-caption">A Backbone.js View with a custom initialize method.</div>

				<header>
					<h4>The View's el, "$el", tagName and className properties</h4>
				</header>

				<p align="justify">
					The <b>"el"</b> property references a DOM object created by the View in the browser. Every Backbone.js view has an "el" property, and if it is not defined, Backbone.js will construct its own, which is, <i>by default</i>, an empty div element. The $el property is just a cached jQuery object selecting the el element.
				</p>				

				<p align="justify">This element will not be attached to the body DOM until it is done in our code.</p>

				<p align="justify">
					It is possible to change the default "el" by passing either a jQuery selector on the View definition or as a parameter to the constructor. In this case, if the element already exists on the DOM, it will be used instead.
				</p>

<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">var</span> <span style="color: #a6e22e">MyView</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">Backbone</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">View</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">extend</span><span style="color: #f8f8f2">({</span> 
	<span style="color: #a6e22e">el</span><span style="color: #f92672">:</span> <span style="color: #e6db74">&#39;#myDefaultViewContainer&#39;</span> <span style="color: #75715e">// sets the default &quot;el&quot;</span>
<span style="color: #f8f8f2">});</span> 

<span style="color: #66d9ef">var</span> <span style="color: #a6e22e">myView</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">new</span> <span style="color: #a6e22e">MyView</span><span style="color: #f8f8f2">({</span> 
	<span style="color: #a6e22e">el</span><span style="color: #f92672">:</span> <span style="color: #e6db74">&#39;#notTheDefaultViewEl&#39;</span> <span style="color: #75715e">// overwrites it</span>
<span style="color: #f8f8f2">});</span> 
</pre></div>
<div class="ac-caption">When this is done the "el" becomes whatever element those selectors point to.</div>

				<p align="justify">
					One could also change the View default DOM node (a DIV) to another of any kind and class by setting these View properties.
				</p>

<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">var</span> <span style="color: #a6e22e">myView</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">new</span> <span style="color: #a6e22e">Backbone</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">View</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">extend</span><span style="color: #f8f8f2">({</span> 
	<span style="color: #a6e22e">tagName</span><span style="color: #f92672">:</span> <span style="color: #e6db74">&#39;span&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #75715e">// not a div anymore</span>
	<span style="color: #a6e22e">className</span><span style="color: #f92672">:</span> <span style="color: #e6db74">&quot;inviteFriend&quot;</span> <span style="color: #75715e">// with a custom class name property</span>
<span style="color: #f8f8f2">});</span>
</pre></div>

<div class="ac-caption">This view would render a <b>&lt;span class="inviteFriend"&gt;&lt;/span&gt;</b>.</div>


				<header>
					<h4>The View render() method</h4>
				</header>

				<p align="justify">
					They key features of the Views are displaying the data and handling user interaction. For displaying data we usually use the <b>render()</b> method.
				</p>

				<p align="justify">
					The render method is only defined on Backbone.js as an empty method that returns the <b>this</b> pointer (for chaining calls). So all render-related actions must be defined by our code, and we should not forget to return the <b>this</b> pointer, too.
				</p>


<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">var</span> <span style="color: #a6e22e">MyView</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">Backbone</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">View</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">extend</span><span style="color: #f8f8f2">({</span> 
	<span style="color: #a6e22e">render</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
		<span style="color: #66d9ef">this</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">$el</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">text</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;Hello World!&#39;</span><span style="color: #f8f8f2">);</span>
		<span style="color: #66d9ef">this</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">$el</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">appendTo</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;body&#39;</span><span style="color: #f8f8f2">);</span>
		<span style="color: #66d9ef">return</span> <span style="color: #66d9ef">this</span><span style="color: #f8f8f2">;</span>
	<span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">});</span>
</pre></div>
<div class="ac-caption">Hello World!</b>.</div>

				<header>
					<h4>Exercise 1</h4>
				</header>

				<p align="justify">
					Open the <b>exercise1.html</b> file on the main project folder. At the bottom of the body, open a new script tag and <b>create</b>, <b>instance</b> and <b>render</b> the following views:
				</p>

				<ol>
					<li>A View with no "el" defined. The render() method should append the element to the body.</li>
					<li>A View with a default "el" selector defined on the View body ("#myViewContainer").</li>
					<li>Create another instance from the previous View, but render it on another DOM element ("#anotherContainer").</li>
					<li>Create another instance from the first View, but this time changing the className and tagName attributes.</li>
					<li>Discover what happens when you point a view to an existing element and set its tagName and className values to differ from that element.</li>
					<li>Discover what happens when you call a view's remove() method.</li>
				</ol>

				<header>
					<h4>Templating</h4>
				</header>

				<p align="justify">
					Templates in Backbone.js are just functions that generate HTML content to be set on the View container. We could use the jQuery <b>html()</b> method to get a simple template running:
				</p>

<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #a6e22e">App</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">ItemView</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">Backbone</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">View</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">extend</span><span style="color: #f8f8f2">({</span>
    <span style="color: #a6e22e">render</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #66d9ef">this</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">$el</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">html</span><span style="color: #f8f8f2">(</span> <span style="color: #a6e22e">$</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;#myTemplate&#39;</span><span style="color: #f8f8f2">).</span><span style="color: #a6e22e">html</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">);</span>
        <span style="color: #66d9ef">this</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">$el</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">find</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;.name&#39;</span><span style="color: #f8f8f2">).</span><span style="color: #a6e22e">text</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;My name&#39;</span><span style="color: #f8f8f2">);</span>
        <span style="color: #66d9ef">this</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">$el</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">appendTo</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;body&#39;</span><span style="color: #f8f8f2">);</span>
        <span style="color: #66d9ef">return</span> <span style="color: #66d9ef">this</span><span style="color: #f8f8f2">;</span>
    <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">});</span>
</pre></div>
		<div class="ac-caption">jQuery "templating".</div>	

				<p align="justify">
					The problem with this approach is that it leaves too much logic inside the render method. Besides, we would have to manually set the values of our model on the template, one by one. While this seem ok for small templates, it could get really messy as our application evolve to have each time bigger and more complex templates.
				</p>


				<p align="justify">
					 More standard templating methods just pass the model as a parameter to the template html generation method and have its values read by that method. Backbone.js can take advantage of the <b>underscore</b> template method to do so, as it is part of its dependencies. 
				</p>

				<p align="justify">
					 The templating methods in general use a source HTML to compile the template function, and then just use passed data attributes into that pre-compiled template:
				</p>

<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #a6e22e">App</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">ItemView</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">Backbone</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">View</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">extend</span><span style="color: #f8f8f2">({</span>
    <span style="color: #a6e22e">initialize</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #66d9ef">this</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">template</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">_</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">template</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">$</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;#ItemTemplate&quot;</span><span style="color: #f8f8f2">).</span><span style="color: #a6e22e">html</span><span style="color: #f8f8f2">());</span>
    <span style="color: #f8f8f2">},</span>
    <span style="color: #a6e22e">render</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #66d9ef">this</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">$el</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">html</span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">this</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">template</span><span style="color: #f8f8f2">({</span><span style="color: #a6e22e">data</span><span style="color: #f92672">:</span><span style="color: #e6db74">&#39;value&#39;</span><span style="color: #f8f8f2">}));</span>
        <span style="color: #66d9ef">return</span> <span style="color: #66d9ef">this</span><span style="color: #f8f8f2">;</span>
    <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">});</span>	
</pre></div>
<div class="ac-caption">Template compiling on the initalize method.</div>

				<p align="justify">
					What is wrong with the code above?
				</p>

				<p align="justify">
					Template compiling can be a heavy-processing operation. On the example above, this operation will run each time an instance of the view is created.
				</p>

				<p align="justify">
					A better way of doing this is removing the compiling from the initializer. One could also have a separated modules only for templates that could be shared between different Views.
				</p>				

<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #a6e22e">App</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">ItemView</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">Backbone</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">View</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">extend</span><span style="color: #f8f8f2">({</span>
    <span style="color: #a6e22e">template</span><span style="color: #f92672">:</span> <span style="color: #a6e22e">_</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">template</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">$</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;#ItemTemplate&quot;</span><span style="color: #f8f8f2">).</span><span style="color: #a6e22e">html</span><span style="color: #f8f8f2">()),</span>
    <span style="color: #a6e22e">initialize</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">...</span> <span style="color: #f8f8f2">},</span>
    <span style="color: #a6e22e">render</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">...</span> <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">});</span>	
</pre></div>
<div class="ac-caption">Now the template is compiled only once for all instances of that View.</div>

				<p align="justify">
					It is a common practice to store micro-templates on the page source code, hidden inside special script tags. These tags contain DOM that will not be rendered by the browser but are readily available for the template compilers.
				</p>

				<p align="justify">
					An even more optimized, real world approach is to pre-compile the templates and add them as a minified jasvascript module.
				</p>

<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%">	<span style="color: #f92672">&lt;script </span><span style="color: #a6e22e">type=</span><span style="color: #e6db74">&quot;text/template&quot;</span> <span style="color: #a6e22e">id=</span><span style="color: #e6db74">&quot;myMicroTemplate&quot;</span><span style="color: #f92672">&gt;</span>
	<span style="color: #f92672">&lt;</span><span style="color: #a6e22e">div</span> <span style="color: #66d9ef">class</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;panel panel-default&quot;</span><span style="color: #f92672">&gt;</span>
		<span style="color: #f92672">&lt;</span><span style="color: #a6e22e">div</span> <span style="color: #66d9ef">class</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;panel-heading&quot;</span><span style="color: #f92672">&gt;</span>
			<span style="color: #f92672">&lt;</span><span style="color: #a6e22e">h4</span><span style="color: #f92672">&gt;</span><span style="color: #a6e22e">What</span> <span style="color: #a6e22e">is</span> <span style="color: #a6e22e">Backbone</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">js</span><span style="color: #f92672">?&lt;</span><span style="color: #960050; background-color: #1e0010">/h4&gt;</span>
		<span style="color: #f92672">&lt;</span><span style="color: #960050; background-color: #1e0010">/div&gt;</span>
		<span style="color: #f92672">&lt;</span><span style="color: #a6e22e">div</span> <span style="color: #66d9ef">class</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;panel-body&quot;</span><span style="color: #f92672">&gt;</span>
			<span style="color: #a6e22e">Are</span> <span style="color: #a6e22e">we</span> <span style="color: #a6e22e">finding</span> <span style="color: #a6e22e">out</span><span style="color: #f92672">?</span>
		<span style="color: #f92672">&lt;</span><span style="color: #960050; background-color: #1e0010">/div&gt;</span>
	<span style="color: #f92672">&lt;</span><span style="color: #960050; background-color: #1e0010">/div&gt;	</span>
	<span style="color: #f92672">&lt;/script&gt;</span>
</pre></div>
<div class="ac-caption">Micro-templating hidden on a script tag.</div>

				<p align="justify">
					Each templating library has its own specific syntax for using variables inside it. The underscore library uses the <b>&lt;%= data %&gt;</b> symbols as data wrappers, while the Handlebars libray uses double handlers as in <b>{{ data }}</b>.
				</p>

				<p align="justify">
					Inside the scope of a pre-compiled template, the fields of the data passed as parameter is accessible as if they were declared JS variables.
				</p>

<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"> <span style="color: #a6e22e">render</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #66d9ef">this</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">$el</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">html</span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">this</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">template</span><span style="color: #f8f8f2">({</span><span style="color: #a6e22e">data</span><span style="color: #f92672">:</span><span style="color: #e6db74">&#39;value&#39;</span><span style="color: #f8f8f2">}));</span>
        <span style="color: #66d9ef">return</span> <span style="color: #66d9ef">this</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">}</span>
</pre></div>
<div class="ac-caption">Passing data to the template function.</div>

<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #f8f8f2">&lt;</span><span style="color: #a6e22e">div</span> <span style="color: #a6e22e">class</span><span style="color: #f8f8f2">=</span><span style="color: #e6db74">&quot;panel-body&quot;</span><span style="color: #f8f8f2">&gt;</span>
	<span style="color: #f8f8f2">&lt;</span><span style="color: #f92672">%=</span> <span style="color: #a6e22e">data</span> <span style="color: #f92672">%</span><span style="color: #f8f8f2">&gt;</span>
<span style="color: #f8f8f2">&lt;</span><span style="color: #f92672">/</span><span style="color: #a6e22e">div</span><span style="color: #f8f8f2">&gt;</span>
</pre></div>
<div class="ac-caption">Underscore syntax for data reading.</div>

				<header>
					<h4>Exercise 2</h4>
				</header>

				<p align="justify">
					Open the <b>exercise2.html</b> file on the main project folder. At the bottom of the body, open a new script tag and <b>create</b>, <b>instance</b> and <b>render</b> the following views:
				</p>

				<ol>
					<li>
						Copy the micro-template shown above and use it as the input for your template. Use the <b>myContainer</b> element as the container for your View.
					</li>
					<li>
						Create a View as the one from the previous exercise. This time, use a jQuery selector on the <b>this.$el</b> to change the contents of the <b>'.panel-body'</b> element.
					</li>
					<li>
						Create a View as the one from the previous exercise. This time, duplicate the template script, give it another ID, and edit it to use the <b>underscore</b> syntax (&lt;%= %&gt;) to change the contents of the <b>'.panel-body'</b> element.
					</li>
				</ol>

				<header>
					<h4>Events</h4>
				</header>

				<p align="justify">
					Events are the way the views react to user actions. The events are defined inside a special field on the View declaration and <b>ALL EVENT LISTENERS ARE SCOPED INSIDE THE VIEW ELEMENT CONTEXT</b>.
				</p>

				<ul class="feature-icons">
					<li class="fa-bolt" style="width: inherit"><b>ALL EVENT LISTENERS ARE SCOPED INSIDE THE VIEW ELEMENT CONTEXT</b></li>
					<li class="fa-bolt" style="width: inherit"><b>ALL EVENT LISTENERS ARE SCOPED INSIDE THE VIEW ELEMENT CONTEXT</b></li>
					<li class="fa-bolt" style="width: inherit"><b>ALL EVENT LISTENERS ARE SCOPED INSIDE THE VIEW ELEMENT CONTEXT</b></li>
				</ul>


<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">var</span> <span style="color: #a6e22e">EventView</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">Backbone</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">View</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">extend</span><span style="color: #f8f8f2">(</span> <span style="color: #f8f8f2">{</span> 
	<span style="color: #a6e22e">events</span><span style="color: #f92672">:</span> <span style="color: #f8f8f2">{</span>
		<span style="color: #e6db74">&#39;click .panel-body&#39;</span> <span style="color: #f92672">:</span> <span style="color: #e6db74">&#39;alertPanelBody&#39;</span>
	<span style="color: #f8f8f2">},</span>
	<span style="color: #a6e22e">alertPanelBody</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">event</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
		<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">event</span><span style="color: #f8f8f2">);</span>
		<span style="color: #a6e22e">alert</span><span style="color: #f8f8f2">(</span> <span style="color: #66d9ef">this</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">$el</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">find</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;.panel-body&#39;</span><span style="color: #f8f8f2">).</span><span style="color: #a6e22e">text</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">);</span>
	<span style="color: #f8f8f2">},</span>
	<span style="color: #a6e22e">render</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">...</span> <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">});</span>
</pre></div>
<div class="ac-caption">Backbone.js View events example.</div>

				<p align="justify">
					It is a common practice to always declare the <b>events</b> field as the <b>first field</b> of the View. The event queries use the jQuery syntax for event handling.
				</p>

				<header>
					<h4>Exercise 3</h4>
				</header>

				<p align="justify">
					Open the <b>exercise3.html</b> file on the main project folder. At the bottom of the body, open a new script tag and:
				</p>

				<ol>
					<li>
						Create a View that uses the '#myMicroTemplate' template and alert the contents of the element clicked (panel-heading or panel-body).
					</li>
				</ol>

			</div>
		</section>		

		<section id="five">
			<div class="container">
				<header class="major">
					<h2>Models, part 1</h2>
				</header>

				<p align="justify">
					<b>Models</b> are the data structures of Backbone.js. They not just store data but are also coded for connecting to any server side <b>REST API</b>, with read, write, create and delete methods, and built-in event firing.
				</p>
				<p align="justify">
					The model's <b>&lt;key,value&gt;</b> pairs are stored on its <b>attributes</b> field.
				</p>	

				<header>
					<h4>Model Methods</h4>
				</header>	
	
				<p align="justify">
					Models can can handle data validation, default values, parsing data received from the remote  server and conforming data back to the server required pattern before sending it. The most used Models methods are:
				</p>

				<ul>
					<li>get:attr</li>
					<li>set</li>
					<li>set:attr</li>
					<li>fetch</li>
					<li>save</li>
					<li>destroy</li>
					<li>validate</li>
					<li>parse</li>
				</ul>				

				<p align="justify">
					Every time you call a Model's <b>fetch</b> or <b>save</b> methods, it will create a call to the <b>sync</b> method. So the <b>sync</b> method can be overwritten if you need to customize your model to match your server's API.
				</p>

				<header>
					<h4>Model Events</h4>
				</header>

				<p align="justify">
					The other key feature of the Models are their event triggering capabilities. This way a View can <b>listenTo</b> a Model data <b>change</b> and re-render itself, or wait for the Model to <b>sync</b> with the server to re-render itself. The Model can also listen to its own events.
				</p>

<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">var</span> <span style="color: #a6e22e">MyModel</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">Backbone</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">Model</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">extend</span><span style="color: #f8f8f2">({</span>
    <span style="color: #a6e22e">initialize</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">(){</span>
        <span style="color: #66d9ef">this</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">on</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;change&#39;</span><span style="color: #f8f8f2">,</span>  <span style="color: #66d9ef">this</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">logChange</span> <span style="color: #f8f8f2">);</span>
    <span style="color: #f8f8f2">},</span>
    <span style="color: #a6e22e">logChange</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">model</span><span style="color: #f8f8f2">,</span> <span style="color: #a6e22e">options</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #f8f8f2">...</span>
    <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">});</span>
</pre></div>
<div class="ac-caption">A Model listens to its own change event.</div>

				<p align="justify">
					The list of the built-in Model events are:
				</p>

				<ul>
					<li>change</li>
					<li>change:attr</li>
					<li>destroy</li>
					<li>sync</li>
					<li>invalid</li>
					<li>error</li>
					<li>all</li>
				</ul>

				<p align="justify">
					You can check all the Backbone.js built-in events here: <b><a target="_blank" href="http://backbonejs.org/#Events-catalog">http://backbonejs.org/#Events-catalog</a></b>. Each built-in event callback can receive different numbers and types of parameters.
				</p>

				<p align="justify">
					If we want to change a Model's attribute but not fire the <b>change</b> event, we can pass the option <b>{silence: true}</b> to the <b>set</b> method. Models can also listen to and fire <b>custom events</b>.
				</p>

				<header>
					<h4>Model Defaults</h4>
				</header>

				<p align="justify">
					The Model defaults are the data that the are going to be automatically filled in when you create a model:
				</p>

<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">var</span> <span style="color: #a6e22e">UserModel</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">Backbone</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">Model</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">extend</span><span style="color: #f8f8f2">({</span>
    <span style="color: #a6e22e">defaults</span><span style="color: #f92672">:</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #e6db74">&quot;name&quot;</span><span style="color: #f92672">:</span> <span style="color: #e6db74">&quot;Default Name&quot;</span><span style="color: #f8f8f2">,</span>
        <span style="color: #e6db74">&quot;email&quot;</span><span style="color: #f92672">:</span> <span style="color: #e6db74">&quot;default@email.com&quot;</span>
    <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">});</span>
</pre></div>
<div class="ac-caption">A Model example with default data definition.</div>				

				<header>
					<h4>Model Validation</h4>
				</header>

				<p align="justify">
					The Model <b>validate</b> method is not defined until we create it to fit our needs. By default <b>save</b> checks validate before setting any attributes but you may also tell <b>set</b> to validate the new attributes by passing <b>{validate: true}</b> as an option. 
				</p>

<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #a6e22e">model</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">set</span><span style="color: #f8f8f2">({</span><span style="color: #e6db74">&#39;name&#39;</span><span style="color: #f92672">:</span><span style="color: #e6db74">&#39;My Name&#39;</span><span style="color: #f8f8f2">},</span> <span style="color: #f8f8f2">{</span><span style="color: #a6e22e">validate</span><span style="color: #f92672">:</span><span style="color: #66d9ef">true</span><span style="color: #f8f8f2">});</span>
</pre></div>
<div class="ac-caption">Model validation on a <b>set</b> call.</div>				

<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">var</span> <span style="color: #a6e22e">UserModel</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">Backbone</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">Model</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">extend</span><span style="color: #f8f8f2">({</span>
    <span style="color: #a6e22e">validate</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">attrs</span><span style="color: #f8f8f2">,</span> <span style="color: #a6e22e">options</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(</span> <span style="color: #a6e22e">attrs</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">name</span> <span style="color: #f92672">===</span> <span style="color: #e6db74">&#39;&#39;</span> <span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
            <span style="color: #66d9ef">return</span> <span style="color: #e6db74">&quot;The name cannot be empty.&quot;</span><span style="color: #f8f8f2">;</span>
        <span style="color: #f8f8f2">}</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(</span> <span style="color: #a6e22e">validateEmail</span><span style="color: #f8f8f2">(</span> <span style="color: #a6e22e">attrs</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">email</span> <span style="color: #f8f8f2">)</span> <span style="color: #f92672">===</span> <span style="color: #66d9ef">false</span> <span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
            <span style="color: #66d9ef">return</span> <span style="color: #e6db74">&quot;Invalid email value.&quot;</span><span style="color: #f8f8f2">;</span>
        <span style="color: #f8f8f2">}</span>
    <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">});</span> 
</pre></div>
<div class="ac-caption">A Model validation example.</div>
			
				<p align="justify">
					If the model validation returns anything, the <b>invalid</b> event is fired and the return of the validate method is stored on the <b>validationError</b> Model property.
				</p>

				<p align="justify">
					In the above example we are returning a simple string as an error, but we could be creating an array to store all errors found on the model validation and returning that array at the end.
				</p>

				<header>
					<h4>Excercise 4</h4>
				</header>

				<p align="justify">
					Open the <b>exercise4.html</b> file on the main project folder. At the bottom of the body, inside a new script tag, do the following:
				</p>

				<ol>
					<li>Create a Model class with default attribute values such as <b>name</b> and <b>email</b>. Instance a model from that class, setting different values for one of the attributes. Use the debugger console to log your model instance's <b>attributes</b> property.</li>
					<li>Make the model listen to its <b>change:name</b> event and log which value was changed. Use the model <b>changedAttributes</b> for checking that.</li>
					<li>Check the <b>previous</b> method <a href="http://backbonejs.org/#Model-previous" target="_blank">documentation</a>. Inside your change listener, use the model <b>previous</b> method to get the old attribute and log both old and new values.</li>
					<li>Create a validate function for your model that returns an error message. Try to <b>set</b> an invalid value for one of your model attributes and log the model attributes.</li>
					<li>Make the Model listen to its <b>'invalid'</b> event. Create a method that will log an error message every time the validation fails.</li>
					<li>Make this error message be the <b>validationError</b> attribute.</li>
				</ol>	
				
			</div>
		</section>	
		
	</div>

	<!-- Footer -->
	<section id="footer">
		<div class="container">
			<ul class="copyright">
				<li>&copy; Avenue Code. All rights reserved.</li>
				<li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
			</ul>
		</div>
	</section>

</div>
</body>
</html>